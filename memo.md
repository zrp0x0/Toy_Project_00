# Toy Project 00
- 이 프로젝트의 목표는 스프링을 전체적으로 공부하기 위해서 실행하는 프로젝트
- AI와 협업하되, 코드의 전체적인 작성을 물어보는 것이 아니라, 피드백 및 추가적인 내용을 위해 활용
- 프론트엔드 디자인 작성 코드는 부트스트랩과 Gemini AI를 완전히 사용
- 이 프로젝트를 진행하기 전 나의 사전 역량 판단
    - 건국대학교 서울캠퍼스 컴퓨터공학부 전공
    - 김철민 강사님의 FastAPI 개발 강의 
    - FastAPI를 활용하여 웹 어플리케이션 개발
    - 간단한 리눅스 커맨드 공부 완료
    - 김영한 자바 스프링 입문 무료 강의
    - 유튜브 어라운드 스튜디오 스프링 강의 기초 강의
    - 코딩애플 자바 스프링 JPA 강의
    - git / github 간단한 사용법 완료
    - sql 기초 문법
    - DB 기초 사용법
    - 네트워크 / 시스템 지식



---
# Day 000


### 어떻게 프로젝트를 나누는 것이 좋을까에 대한 고민
- 흔히 말하는 전통적인 MVC가 처음에 와닿았는데 폴더도 많이 안 만들어도 되서 좋다고 생각함
- FastAPI를 개발할 때 이 패턴을 따라서 개발했음
- 근데 이게 개발을 직접 하다보니깐 Domain별로 만드는 것이 주관적인 생각으로 더 좋을 것 같음
- 그래서 다음과 같이 기본적인 프로젝트 골격을 만들기로 했음
```
com.example.project
 ├─ ProjectApplication.java
 ├─ global
 │   ├─ config
 │   ├─ common
 │   ├─ exception
 │   ├─ response
 │   └─ util
 ├─ domain
 │   ├─ user
 │   │   ├─ controller
 │   │   ├─ service
 │   │   ├─ repository
 │   │   ├─ entity
 │   │   └─ dto
 │   ├─ order
 │   └─ product
 └─ infra
     ├─ external
     └─ persistence
```

```
domain
 ├─ controller
 │   └─ DomainController.java
 ├─ service
 │   ├─ DomainService.java          // 인터페이스
 │   └─ DomainServiceImpl.java      // 구현체
 ├─ repository
 │   └─ DomainRepository.java
 ├─ entity
 │   └─ Domain.java
 └─ dto
     ├─ DomainCreateRequest.java
     ├─ DomainResponse.java
     └─ DomainUpdateRequest.java
```
- 여기서 dto는 구조는 아직 미정
- 일단 초기 프로젝트 구성은 여기까지


### 무엇을 만들까에 대한 고민
- 일단 기본적인 CRUD 작업을 공부하고 싶음
- 쇼핑몰 시스템을 구현해보자
- 근데 엄청난 걸 만드는 것이 아닌 나의 지식 한계선을 경험해보자는 취지로 개발을 시작하자


### 해봤다 vs 할 수 있다 vs 해야지
- 객관적으로(어차피 주관적이지만) 나의 실력을 평가
- 다양한 배경지식이 깔려 있음
- 완전히 내것은 아니지만 들어봤다라고 말할 수 있음
- 지금은 스프링을 해봤다라는 수준은 안되는 것 같음
- 방금 친구랑 통화했는데 3주전보다 스프링에 대한 아는 내용은 늘었지만
- 부족한게 아직 넘쳐난다는 사실을 인지
- 더닝그루거효과? 지금 딱 쉬운 것들을 배워서 자신감은 있는 상태
- 이 프로젝트의 목적을 다시 한 번 확인 
    - 내가 어느 정도까지 할 수 있는지 확인
- 이 프로젝트를 마치고 해봤다라고 할 수 있을 수준까지 성장하는 것이 목표
- 할 수 있다와 해야지는 조금 다른 것 같음
    - 해야지는 할 수 있다를 내포한다고 생각함


### 들어가기에 앞서
- 이런 개념이 있다를 미리 알고 있냐 없냐의 차이는 엄청난 차이를 만든다는 것을 알고 있음
- 적어도 나한테는
- 그 지식들의 존재 여부를 알고 있다까지 성장하는 것이 목표
- 그리고 사실 마음 속으로 이 프로젝트가 누군가에게 공부를 할 수 있는 자료로 사용될 수 있으면 좋겠다고 생각함(나처럼 처음 시작하는 사람들에게)
- 다만, 나는 전공생, 하지만 학점은 높지 않음
- 그래도 공부를 안해서 학점이 낮다고 절대 생각하지 않음
- 부족한 것들이 많이 있었고
- 꾸준히 성적을 올릴 수 있었음


### 마지막으로 나에 대한 생각 정리
- 첫 대학교 학점 2.8
- 심지어 코로나 때(집에서 게임만 함)
- 군대 갔다 옴(해병대)
- 복학하고 성적 3점 초반대
- 자바, C 이런게 뭔지도 제대로 모름(군대에서 다 까먹음)
- C 언어 학원 다님(복학 전까지)
- 근데 C 언어를 사용하는 수업을 듣지 않음(못함?)
- 자바 사용 수업들음, 자바 공부하다가 시간 다 날아감
- 그때는 언어를 배우는게 너무 힘들었음. 그냥 암기 같았음
- 이 떄 스믈스믈 AI가 나오기 시작(ChatGPT 등장!!)
- 인공지능 수학 같아서 하기 싫음
- 웹 개발 다른 사람들이 너무 많이 하는 것 같아서 하기 싫음
- 2학년 2학기 시스템 프로그래밍 수업이 너무 재밌엇음(C 사용)
- 근데 이 때 더 팔걸.. 학교 공부 열심히 한 거로 마무리 (근데 이것만 함)
- 네트워크 수업 듣는데 교수님 평이 안좋다는 말도 안되는 이유로 수업을 제대로 듣지 않음(미쳤지 ㅋㅋ)
- 근데 네트워크를 완전히 놓지 않음
- 물론 수업을 열심히 들었으면 좋았겠지만, 그래도 유튜브나 온라인 강의로 계속해서 공부 시도(??)
- 네트워크가 무엇인지 알았음(물론 완전히는 아니지만 들어봤다 정도)
- 3학년 1학기 시작 이전 학점 3.3정도? 
- 근데 인생 첫 연애를 시작. 악명 높은 3학년 1학기 과목 운영체제, 데이터베이스
- 말아먹음 솔직히 네트워크는 열심히 다른걸로 공부하기라고 했지 위 두 과목은 그냥 공부를 안하듯이 해버림(ChatGPT로 과제 하기 시작함 이 때부터 뭔가 잘못됐다고 인지함)
- 연애하느라 공부 제대로 안함(진짜 1학년 때 처럼 공부 안해버림)
- 정신차리려고 게임 개발 공부함(C/C# 공부)
- 이 때 내 인생의 터닝 포인트 강사를 만남(인프런 루키스)
- 이 사람 강의력이 나한테 너무 잘 맞았음(C++강의 수강 시작)
- 하려다가 C# 게임 서버 강의 수강
- 네트워크 운영체제 시스템 프로그래밍 내용이 나와서 너무 좋았음(그동안은 이론 공부여서 재미없었는데)
- 배운 내용을 활용하기 시작하니깐 재밌음 근데 내용이 너무 어려웠음
- 학교 공부랑 병행
- 학교 공부를 열심히 하지 않은 건 아니지만 한 과목을 아예 버려버림(게임 서버 공부랑 바꾸었다고 생각함)
- 근데 지금은 다 기억은 안남 좋은 경험이였음
- 게임 서버 개발자가 되고 싶다고 생각함
- C++ 공부 시작(학교 수업으로 아직 못들었음)
- C++ 공부를 루키스 강의로 하다가 신세계를 맛봄
- 왜 C를 제대로 공부하면 다른 언어 배우기가 쉽다는 걸지 이때 이해하기 시작
- 포인터도 절대 어려운 개념이 아니였다는 걸 알게됨
- 원리를 공부하는 것이 재밌기 시작함(물론 끔찍하게 힘듦)
- 모든 공부에 이 원리를 적용하기 시작함
- 예전에는 웹 프로그래밍을 공부하면(프론트엔드)
- 그냥 암기식 AI 해줘 함
- 근데 이제는 왜 이렇게 코드를 짜는 거고, 내부 동작이 어떻게 일어나는지 알고 싶어지기 시작함
- 게임 서버 학원(프로카데미)가려고 준비함
- 그리고 성적이 3.89를 찍음 (4학년 1학기 역대 최고 학점)
- 욕심이 나기 시작함(이전까지는 컴공은 학점 상관없이 라는 쓰레기 같은 마인드를 가짐)
- 무조건 틀린 말은 아닌데 나한테는 해당되지 않는다는 것을 알게됨(다른 걸 진짜 열심히 하는 사람들한테나 해당되는 말임)
- 그래도 인정하고 나의 인생을 바꾸려고 노력하기 시작함
- 운동도 하고 계획을 세워서 공부하기 시작함
- 4학년 여름방학(나의 두번째 터닝 포인트)
- 그 동안 인공지능, 웹 개발 완전히 배제함
- 사실 인공지능은 수학때문에 무서워서 포기했고, 웹 개발은 자바 언어하기 싫어서 안함 스프링은 또 뭔데..
- 나는 C계열, Python을 좋아했음
- Python FastAPI 강의를 듣기 시작함(웹 개발 공부)
- 나도 웹 개발이 뭔지는 좀 알아보자
- Python Machine Learning 강의 시작(지금생각하면 데이터 사이언스에 더 가까운 내용 같음)
- 인공지능에 두려움을 갖지 말자 
- 드디어 공부하기 무서웠던 과목으로부터 도망치지 말자 마인드 장착 시도 중
- 수학이 나와 일단 넘겨 그리고 나중에 따로 필요하면 공부해
- 편미분 기호가 무서웠던 ㅋㅋㅋ
- 근데 편미분 별거 없었음 (일단 기초적인 내용을 이해하는데 있어서는)
- 유뷰브 혁펜하이머? AI 수학 강의 들음(노력 시도)
- 4학년 2학기 시작
    - 기계학습
    - 소프트웨어아키텍처
    - 웹기술및응용
    - 컴퓨터정보보안
    - 졸업프로젝트
- 4-2 5전공 드가자~ (취업 준비 쳐다도 안봄 선택과 집중 그리고 대학 다니면서 들을 수 있는 과목은 다 듣고 싶었음 물론 AI는 기계학습 과목이 처음(이건 좀 아쉽다 컴비, 자연어처리 이런거 들어볼걸,,,))
- 기계학습 공부 미친듯이 함
- 같이 듣는 동기 형이 있었는데 경쟁 심리 생김(그 형이 너무 열심히 사는 모습을 보여줫어)
- 순수 공부에 집중(FastAPI 강의 다시 듣기, C++강의 다시 듣기)
- FastAPI는 소프트웨어아키텍처에서 웹개발을 해야되서 들음
- 웹기술및응용도 FastAPI와 프론트엔드를 배우기 때문
- 시험 보기 전 기계학습 6회독 함
- 매일 매일 수업끝나면 최대한 복습 시도
- 추가적인 내용 GPT, 블로그, 유튜브로 학습하기 시작함
- 책도 봄
- 강의도 사서 봄(근데 이게 있다만 배움)
- 질문도 많이 함
- 결론 기계학습 최종 A+
- 컴퓨터정보보안도 관심있었음 
- 원래 컴공 온 이유가 슈퍼 해커가 되고 싶어서였음
- BOF가 내가 생각하던 거랑 원리가 완전히 다름을 알고 신세계를 맛봄(원리를 제대로 이해하는 것이 중요하는 거 상기)
- 컴퓨터정보보안 절평이지만 A+
- 소프트웨어아키텍처 솔직히 중간은 이론이라 거의 던져버림
- 근데 공부를 안한게 아니고, 아니다 공부를 안했다... 그래도 수업은 열심히 들음
- 기학/컴정보에 집중 특히 컴정보 50점 못넘으면 F라길래 진짜 미친듯이 공부함
- 강의 6번 들음 정리 3번 함
- 근데 소아는 프로젝트를 열심히 함
- 그냥 나 혼자 다 함
- 프론트 백엔드 시스템 설계 문서 작성 그냥 내가 다함
- 첫 발표: 교수님왈: 완전히 다시 해야겠다 - 충격: 이미 거의 다 해놔서 기말 때 편하게 지내려고 했음
- 미친듯이 리팩토링: 소아의 내용을 다시금 상기 시킴(디자인 패턴 설계 이유 Do가 아닌 Why에 집중)
- 최종 발표: 교수님왈: 피드백 할 거 없다 열심히 한게 보인다 잘했다
- 민덕기 교수님이 그렇게 말하는거 처음 봄 (주관적인 생각)
- 성적 B+ 근데 돌이켜보면 중간을 진짜 심하게 망쳐서 B+이 어떻게 나온지 모르겠음(상세 내용 안보여주심)
- 졸프 열심히 함(팀원 분들 수고했다... 우리는 결국 해낸거야!!)
- 졸프 A
- 웹기술및응용 A
- 최종성적 4.11
- 결국 내 성적 그래프는 올라감
- 4.11 뭐 별거 아니잖아?라고 할 수 있는데 나는 성적 2.58까지 내려갔던 사람임
- 그리고 컴공은 기반 지식이 무너지기 시작하면 그거 채우는데 더 오랜시간이 걸림
- 근데 그냥 그렇게 생각하려고 내 스스로 대견하다고,,,
- 컴구도 35점 맞았음 평균 45였는데 근데 기말때 80맞음
- 항상 그랬음 
- 그리고 컴구 35점 맞았을 때 나는 5회독을 했고 문제도 다 풀었어서 믿기지 않았음 포기하고 싶었음 짜증났음 => 포기 안함 더 이갈아버림 80점 획득
- 선대도 그랬음
- 그냥 전체적으로 그랬음
- 그냥 나는 그렇게 생각함 처음은 남들이 다할 수 있는것도 못하는 것처럼 보여도 결국 내가 끝까지 가면 이겨
- 그냥 그렇게 생각하고 사는게 편하고 좋음
- 이제 취준 시기 옴 졸업이니깐 근데 솔직히 나는 뭐 안됨
- 게임 서버 개발(사실 뜬구름 잡는 이야기 일 수도 있음) => 가정 문제(이건 변명이긴해) => 포기
- 남은 건 AI아니면 백엔드
- AI 대학원 거의 필수 중 필수 대학원 갈 노력 안해봄(사실 무서움 - AI가 무섭다기 보단...)
- 백엔드 무서운 자바 스프링 안해봄(자바 문법 기억도 잘안남)
- 근데 놀라운 사실 자바라는 언어가 C++때 공부했던 방법 때문에 너무 쉽게 받아들여짐
- 원래라면 자바 공부 한달 => 스프링 기초부터 공부(커리큘럼 탐색하면서 )
- 이거 하면 인생 ㅈ될 것 같음(왜냐면 자바 공부 한달? 4학년 전공생이?)
- 물론 깊게 파면 좋지 근데 지금 그럴 상황 아님(2학년, 3학년때 했어야지 ㅇㅇ)
- 근데 스프링은 진짜 하나도 모름
- 스프링 입문 강의 무료 있길래 봄 강의 구성도 최고였던게 전체적인 그림을 보여주는 강의임(AOP까지 다룸) 단 원리는 깊게 다루지 않음 이런게 있어요 - 위에서 말했지만 개념이 있다를 알고 있는거랑 모르는건 천지 차이임 나한테는
- 유튜브에 무료 강의 있음 그냥 무작정 따라 해봄 Maven 씀 근데 다른 강의는 Gradle씀 아 몰라 그냥 따라해
- 참고로 나는 스프링이 너무 무서웠음 대학교때 프로젝트하다나 build.gradle 파일 보고 알 수없는 벽을 느낌
- 지금은 귀여움.. AI 덕분에.. 고맙다 제미나이 지피티!!
- 코딩 애플 강의 들음(JWT 까지 다루길래 S3도 다루고) - 고민 많이 했는데 최고의 선택
- 사실 졸프할 때도 도움 많이 받음 코딩애플씨!!
- 그렇게 지금까지 옴
- 이게 지금까지 나의 대학 생활 이야기



---
# Day 001


### Item CRUD 기초 작성
- Entity, DTO를 어떻게 짤까?
    - Entity를 사용해서 외부로 전송해도 되지만 보안 문제, 커스텀할 수 없음 등의 문제 발생


### Entity, DTO 왜 분리해야할까?
- Entity는 실제 DB 테이블을 만들 때 사용(제약 사항 등)
- DTO는 실제 DB에 넣기 전 데이터
- DTO를 가지고 통신하다가 Entity로 변경 후 실제 DB에 작성하는 것이 좋아보임
- DTO는 내가 원하는데로 커스텀할 수 있어서 좋음


### Item Entity 설계
- 일단 ID / 이름 / 가격 / 수량 / 등록 날짜
- 나중에 User 객체랑 맵핑할 건데 이건 좀 나중에 생각(이유가 있음)
- 등록 날짜를 어떻게 할지 고민 중 AI와 대화 시도


### Auditing
- 데이터의 생성과 수정 과정을 자동으로 기록(감시)하는 기능
```java
//Item.java
@CreatedDate
@Column(updatable = false) // 수정 시에는 날짜가 바뀌지 않도록 보호
private LocalDateTime regDate;

@LastModifiedDate // 수정 시 자동으로 날짜가 바뀜
private LocalDateTime updatedAt;
```
- 왜 사용하는가?
    - 실수 방지: Date를 일일히 넣어주지 않아도 자동으로 해줌
    - @EnableJpaAuditing 이거 붙여서 감시할거야 가능
    - @EntityListeners(AuditingEntityListener.class) 감시할 객체에 붙여주면 됨
    - 생성 날짜와 업데이트 날짜를 기록을 자동으로 할 수 있음


### DTO 분리
- _Response: 클라이언트에게 응답을 보내줄 DTO
- _Request: 클라이언트로부터 응답을 받아줄 DTO
    - 여기서는 검사를 1차적으로 진행 (Bean Validation)


### DTO <=> Entity
- DTO => Entity
    - .toEntity()

- Entity => DTO
    - static.from()


### Controller / Service
- Controller <=> Client
    - Use DTO

- Service <=> Controller
    - DTO => Entity: Controller => Service
    - Entity => DTO: Service => Controller


### 상품 생성 처음 알게 된 것
```java
@GetMapping("/item/create") 
    public String itemCreate(
        Model model
    ) {
        model.addAttribute("itemForm", new ItemRequest());
        return "itemCreate.html";
    }

    @PostMapping("/item/create")
    public String itemCreate(
        ItemRequest itemRequest
    ) {
        itemService.createItem(itemRequest);
        // 나중에 id detail로 전환하는 로직 작업 해보자
        return "redirect:/item/list";
    }
```
- 빈 객체를 보내줌으로써 클라이언트에서 해당 변수에 접근을 해서 채워서 저 객체로 받을 수 있음
```html
<form th:action="@{/item/create}" th:object="${itemForm}" method="post">
<input type="number" id="price" th:field="*{price}" class="form-control" 
```
- 여기서 th:object에 해당하는 변수 이름으로 담아 줄 수 있음
- field에 넣으면 됨 이름 같아야함


### spring.mvc.hiddenmethod.filter.enabled=true
- 이거 설정하면 form에서 PUT / PATCH / DELETE를 사용할 수 있음


### 내가 알고 있는 클라이언트로부터 데이터 받기
- @PathVariable: Path 파라미터로 받을 수 있음 /item/{id}
- @RequestParam: Query 파라미터로 받을 수 있음 /item?id=1&name=상품명
    - 또한 form의 input의 name 속성에 맞는 걸 받을 수 있음

- @RequestBody: Body 데이터로 전송될 걸 받을 수 있음(RESTFul API에서 많이 사용하는 걸로 알고 있음)
- @ModelAttribute: 객체 자체로 받을 수 있음(변수명이 동일해야함)


### 다음에 할 것 정리
- 회원 가입 / 로그인 / 로그아웃 기능 만들기
- 쿠키/세션 방식으로 만들어보고 JWT로 전환하기 
- JWT로 일단 만들기
- 권한 설정 등 
- API 권한 설정 해보기
- HTML 단에서도 권한 설정 해보기


### 좀 나중에 할 것
- 제대로 된 검증 테스트
- 예외 처리
- 에러 처리



### 회원가입 (쿠키 - 세션으로 할 때 한 것들 AtoZ로 작성해보자!! (숙제))



### 앞으로 할일
- N+1 문제 해결해보기
- 댓글 기능
- 주문 기능 (결제 기능은 일단 미 포함)
    - 트랜잭션 처리

- 본인의 상품을 주문한 사람들 정보 확인

- <관리자 페이지>
    - 회원가입 된 유저 정보 보기
    - 해당 유저가 등록한 상품들 리스트 보기
    - 해당 유저가 구매한 상품들 리스트 보기


### 전체 프로젝트 기능들
- 회원가입 / 로그인 (Spring Security)
- 쿠키 세션 => JWT
- CSRF 설정

- user
    - 상품 등록
    - 상품 조회(전체, 세부)
    - 상품 수정
    - 상품 삭제
    - 댓글 기능
    - 주문 기능(결제 기능 미포함)
        - 트랜잭션 처리

    - 기능별 권한 부여

    - N+1 문제 발생 및 해결

- admin
    - 회원가입 된 유저 정보 보기
    - 해당 유저가 등록한 상품 리스트 보기 
    - 해당 유저가 구매한 상품 리스트 보기
    - 클릭시 그 해당 상품 상세 페이지로 이동

- Doamin
    - Member
    - Item
    - Comment
    - Order



### 와 대박 왜 보안이 중요한지 
```javascript
fetch('/item/delete/4', {
    method: 'DELETE' // @DeleteMapping이므로 반드시 DELETE여야 함
})
.then(res => {
    if (res.ok) console.log("💣 공격 성공! 주인 확인 없이 지워졌다면 보안 취약입니다.");
    else console.log("상태 코드: " + res.status); // 여기서 405가 나오는지 확인!
});
```
- 그냥 이거 때리니깐 지워짐
- 데이터 수정, 삭제 등 위험한 것은 항상 해당 권한이 있는지 로직체크를 반드시 해야함